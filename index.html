<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Skull King Score App</title>
    <link href='https://fonts.googleapis.com/css?family=Aclonica' rel='stylesheet'>
    <style>
        body {
            font-family: 'Aclonica';
            font-size: 22px;
        }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <link rel="stylesheet" href="landscapelock.css">
</head>
<script>
    var numberOfPlayers = prompt("Input the number of players!")
    alert("We play with " + numberOfPlayers + " players.")

    function func_btn_confirm() {

        for (let index = 0; index < numberOfPlayers; index++) {
            document.getElementById("textboxName" + index).style.display = "none"
        }
        document.getElementById("btn_policy").style.display="none"
              

        var scoreTable = document.getElementById("scoreTable");
        var header = scoreTable.createTHead();
        var row = header.insertRow(0);
        //cell.innerHTML = "<b>This is a table header</b>";
        var firstCell = row.insertCell(0);
        firstCell.innerHTML = "Round"
        //document.getElementById("firstcellid").innerHTML="this"

        for (let index = 0; index < numberOfPlayers; index++) {
            var cell = row.insertCell(index + 1);
            cell.innerHTML = document.getElementById("textboxName" + index).value;

            //            document.getElementById("textName" + index).innerHTML = document.getElementById("textboxName" + index).value;
        }

        //for (let index = 0; index < 10; index++) 
        {
            index=0
            var thisRow = scoreTable.insertRow(index + 1);
            var ThisRowFirstCell = thisRow.insertCell(0);
            ThisRowFirstCell.innerHTML = "R " + (index + 1);

            for (let index2 = 0; index2 < numberOfPlayers; index2++) {
                var thisCellinRow = thisRow.insertCell(index2 + 1);
                

                var divDemo = document.createElement('p');

                var rangeInput=document.createElement('input')
                rangeInput.setAttribute("id","rangeInput" + index + "_" + index2)

                rangeInput.setAttribute("type","range")
                rangeInput.setAttribute("class","slider-width100")
                rangeInput.setAttribute("value","0")
                rangeInput.setAttribute("min","0")
                rangeInput.setAttribute("max",""+Math.min(4,(index+1)))
                rangeInput.setAttribute("step","1")
                rangeInput.setAttribute("list","steplist")
                rangeInput.setAttribute("onchange","func_update(this.value," + index + "," + index2 + ")")
                divDemo.appendChild(rangeInput);


                var spanInput=document.createElement('span')
                spanInput.setAttribute("id","rangeValue" + index + "_" + index2)
                spanInput.setAttribute("onClick","func_range_update("+index + "," + index2 + ")")

                spanInput.innerText=" 0"
                divDemo.appendChild(spanInput)
                

                // var rangeVlaue=document.createElement('p')
                // rangeVlaue.setAttribute("id","rangeValue" + index + "_" + index2)
                // rangeVlaue.value=" 0"
                thisCellinRow.appendChild(divDemo);


                //thisCellinRow.innerHTML = 
                //"<p><input type='range' class='slider-width100' value='0' min='0' max='" + (index + 1) + "'step='1' list='steplist' onchange='func_update(this.value," + index + "," + index2 + ")'><span id='rangeValue" + index + "_" + index2 + "'> 0</span></p>"
            }

            var thisCellinRow = thisRow.insertCell(numberOfPlayers+1);
            var divDemo = document.createElement('input')
            divDemo.setAttribute("type","button")
            thisCellinRow.appendChild(divDemo);


        }


    }

    function func_range_update(index, index2) {
        var modifiedRange=document.getElementById("rangeInput" + index + "_" + index2)
        if (index<4)
        {
            return
        }
        if (modifiedRange.getAttribute("min")=="0")
        {
            modifiedRange.setAttribute("max",String(Math.min(10,index+1)))
            modifiedRange.setAttribute("min","4")
            modifiedRange.setAttribute("value","4")
            func_update(4,index,index2)
        }
        else{
            
            modifiedRange.setAttribute("max",""+Math.min(4,(index+1)))
            modifiedRange.setAttribute("min","0")
            modifiedRange.setAttribute("value","0")
            func_update(0,index,index2)
        
        }
        
    }


    function func_update(val, index, index2) {
        document.getElementById("rangeValue" + index + "_" + index2).innerText = " "+val;
    }
</script>

<body id="container">
    <datalist id='steplist'>
        <option label='0' value='0'>
        <option label='1' value='1'>
        <option label='2' value='2'>
        <option label='3' value='3'>
        <option label='4' value='4'>
        <option label='5' value='5'>
        <option label='6' value='6'>
        <option label='7' value='7'>
        <option label='8' value='8'>
        <option label='9' value='9'>
        <option label='10' value='10'>
    </datalist>

    <script>


        //function func_test() 
        {
            // alert('button pressed')
            for (let index = 0; index < numberOfPlayers; index++) {
                var divaa = document.createElement('input');
                divaa.setAttribute("id", "textboxName" + index);
                divaa.setAttribute("value", "P" + index);
                divaa.setAttribute("placeholder", "P" + (index + 1));
                divaa.setAttribute("style", "font-size:100%; font-family: 'Aclonica'; position:relative; width:" + (100 / numberOfPlayers - 5) + "%")
                document.body.appendChild(divaa);

                var divDemo = document.createElement('text');
                var textDemo = document.createTextNode('  ');
                divDemo.appendChild(textDemo);

                document.body.appendChild(divDemo);

            }


        }

        window.onload = function () {
        }


    </script>


    <input type="button" id="btn_policy" style="font-size:100%; font-family: 'Aclonica';" value="confirm"
        onClick="func_btn_confirm()" /></p>

    <h1><span id="textName0"></span><span id="textName1"></span><span id="textName2"></span><span
            id="textName3"></span><span id="textName4"></span><span id="textName5"></span></h1>

    <table id="scoreTable" style="text-align: center; margin:auto">
    </table>



</body>

</html>
